/*
 * Copyright (C) 2016 hedede <haddayn@gmail.com>
 *
 * License LGPLv3 or later:
 * GNU Lesser GPL version 3 <http://gnu.org/licenses/lgpl-3.0.html>
 * This is free software: you are free to change and redistribute it.
 * There is NO WARRANTY, to the extent permitted by law.
 */
#ifndef aw_script_char_type_h
#define aw_script_char_type_h
#include <functional>
#include <aw/types/types.h>
namespace aw::script {
namespace characters {
/*!
 * Character categories
 */
enum Category {
	NameBegin     = 0x01,
	Numeric       = 0x02,
	Punctuation   = 0x04,
	Space         = 0x08,
	reserved1     = 0x10,
	reserved2     = 0x20,
	UnicodeHead   = 0x40,
	UnicodeTail   = 0x80,
	Name          = NameBegin | Numeric,
	TokenBegin    = NameBegin | Numeric | Punctuation,
};

//constexpr char_count = std::numeric_limits<char>::digits;
/*!
 * Mapping of characters to categories
 */
u8 types[] = {
//0  SOH  STX  ETX  EOT  ENQ  ACK  BEL  BS    \t   \n   \v   \f   \r   SO   SI
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x00,0x00,
//DLE DC1  DC2  DC2  DC4  NAK  SYN  ETB  CAN  EM   SUB  ESC  FS   GS   RS   US
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//     !    "    #    $    %    &    '    (    )    *    +    ,    -    .    /
0x08,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,
//0    1    2    3    4    5    6    7    8    9    :    ;    <    =    >    ?
0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x00,0x04,0x04,0x04,0x04,0x00,
//@    A    B    C    D    E    F    G    H    I    J    K    L    M    N    O
0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
//P    Q    R    S    T    U    V    W    X    Y    Z    [    \    ]    ^    _
0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x04,0x04,0x04,0x04,0x01,
//`    a    b    c    d    e    f    g    h    i    j    k    l    m    n    o
0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
//p    q    r    s    t    u    v    w    x    y    z    {    |    }    ~   DEL
0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x04,0x04,0x04,0x04,0x00,
//Unicode
0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
0x00,0x00,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,
0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x60,
0x40,0x40,0x40,0x40,0x60,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,
0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,
};
} // namespace characters

bool is_name_char(char c)
{
	return characters::types[(unsigned char)c] & characters::Name;
}

bool is_name_begin(char c)
{
	return characters::types[(unsigned char)c] & characters::NameBegin;
}

bool is_token_begin(char c)
{
	return characters::types[(unsigned char)c] & characters::TokenBegin;
}
} // namespace aw::script
#endif//aw_script_char_type_h
